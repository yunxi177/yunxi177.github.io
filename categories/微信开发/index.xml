<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>微信开发 on 一二三四吾</title>
    <link>http://www.artacode.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/</link>
    <description>Recent content in 微信开发 on 一二三四吾</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    
	<atom:link href="http://www.artacode.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>微信分享</title>
      <link>http://www.artacode.com/posts/wxshare/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://www.artacode.com/posts/wxshare/</guid>
      <description>绑定域名＆　引入js https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;amp;id=mp1421141115　参考文档步骤１，步骤２
设置ip白名单 在 基本配置-&amp;gt;ip白名单将服务器Ip配置好即可
生成分享配置 将下面代码加入项目
&amp;lt;?php class WxShare { private $appId; private $appSecret; public function __construct($appId = &#39;自己的appid&#39;, $appSecret = &#39;自己的appSecret&#39;) { $this-&amp;gt;appId = $appId; $this-&amp;gt;appSecret = $appSecret; } public function getSignPackage() { //接收到前端的转义url转义回来 $url = $_POST; $durl = $url[&#39;url&#39;]; $durl = urldecode($durl); $jsapiTicket = $this-&amp;gt;getJsApiTicket(); var_dump($jsapiTicket); $timestamp = time(); $nonceStr = $this-&amp;gt;createNonceStr(); // 这里参数的顺序要按照 key 值 ASCII 码升序排序 $string = &amp;quot;jsapi_ticket=$jsapiTicket&amp;amp;noncestr=$nonceStr&amp;amp;timestamp=$timestamp&amp;amp;url=$durl&amp;quot;; $signature = sha1($string); $signPackage = [ &amp;quot;appId&amp;quot; =&amp;gt; $this-&amp;gt;appId, &amp;quot;nonceStr&amp;quot; =&amp;gt; $nonceStr, &amp;quot;timestamp&amp;quot; =&amp;gt; $timestamp, &amp;quot;url&amp;quot; =&amp;gt; $url, &amp;quot;signature&amp;quot; =&amp;gt; $signature, &amp;quot;rawString&amp;quot; =&amp;gt; $string ]; // var_dump($signPackage);die; return $signPackage; } public function curlGet($url) { $curl = curl_init(); // 启动一个CURL会话 curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_HEADER, 0); curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); // 跳过证书检查 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, true); // 从证书中检查SSL加密算法是否存在 $tmpInfo = curl_exec($curl); //返回api的json对象 //关闭URL请求 curl_close($curl); return $tmpInfo; //返回json对象 } public function curlPost($url, $data) { $curl = curl_init(); // 启动一个CURL会话 curl_setopt($curl, CURLOPT_URL, $url); // 要访问的地址 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); // 对认证证书来源的检查 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 1); // 从证书中检查SSL加密算法是否存在 curl_setopt($curl, CURLOPT_USERAGENT, $_SERVER[&#39;HTTP_USER_AGENT&#39;]); // 模拟用户使用的浏览器 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1); // 使用自动跳转 curl_setopt($curl, CURLOPT_AUTOREFERER, 1); // 自动设置Referer curl_setopt($curl, CURLOPT_POST, 1); // 发送一个常规的Post请求 curl_setopt($curl, CURLOPT_POSTFIELDS, $data); // Post提交的数据包 curl_setopt($curl, CURLOPT_TIMEOUT, 30); // 设置超时限制防止死循环 curl_setopt($curl, CURLOPT_HEADER, 0); // 显示返回的Header区域内容 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); // 获取的信息以文件流的形式返回 $tmpInfo = curl_exec($curl); // 执行操作 if (curl_errno($curl)) { echo &#39;Errno&#39;.</description>
    </item>
    
  </channel>
</rss>